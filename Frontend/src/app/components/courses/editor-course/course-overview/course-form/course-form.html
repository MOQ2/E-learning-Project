<div class="content-body" [formGroup]="courseForm">
  <div class="form-container">
    <section class="card">
      <div class="form-grid">
        <div class="form-field">
          <label for="course-title">Course Title</label>
          <input type="text" id="course-title" formControlName="name" placeholder="name • Course title">
          <div *ngIf="courseForm.get('name')?.invalid && courseForm.get('name')?.touched" class="error-message">
            <span *ngIf="courseForm.get('name')?.errors?.['required']">Course title is required.</span>
            <span *ngIf="courseForm.get('name')?.errors?.['minlength']">Title must be at least 3 characters.</span>
            <span *ngIf="courseForm.get('name')?.errors?.['maxlength']">Title must be less than 100 characters.</span>
          </div>
        </div>
        <div class="form-field form-field--span-2">
          <label for="course-description">Brief Description</label>
          <textarea id="course-description" formControlName="description" rows="4" placeholder="description • Brief description"></textarea>
          <div *ngIf="courseForm.get('description')?.invalid && courseForm.get('description')?.touched" class="error-message">
            <span *ngIf="courseForm.get('description')?.errors?.['minlength']">Description must be at least 10 characters.</span>
            <span *ngIf="courseForm.get('description')?.errors?.['maxlength']">Description must be less than 500 characters.</span>
          </div>
        </div>
        <div class="form-field">
          <label for="course-duration">Estimated Duration (Hours)</label>
          <input type="number" id="course-duration" formControlName="estimatedDurationInHours" placeholder="e.g., 12">
          <div *ngIf="courseForm.get('estimatedDurationInHours')?.invalid && courseForm.get('estimatedDurationInHours')?.touched" class="error-message">
            <span *ngIf="courseForm.get('estimatedDurationInHours')?.errors?.['min']">Duration must be at least 1 hour.</span>
            <span *ngIf="courseForm.get('estimatedDurationInHours')?.errors?.['max']">Duration must be less than 1000 hours.</span>
          </div>
        </div>
        <div class="form-field">
          <label for="course-difficulty">Difficulty Level</label>
          <select id="course-difficulty" formControlName="difficultyLevel">
            <option value="">Select</option>

            <option value="BIGINNER">Beginner</option>
            <option value="INTERMEDIATE">Intermediate</option>
            <option value="ADVANCED">Advanced</option>
          </select>
          <div *ngIf="courseForm.get('difficultyLevel')?.invalid && courseForm.get('difficultyLevel')?.touched" class="error-message">
            <span *ngIf="courseForm.get('difficultyLevel')?.errors?.['required']">Difficulty level is required.</span>
          </div>
        </div>
        <div class="form-field">
          <label for="course-status">Status</label>
          <input type="text" id="course-status" formControlName="status">
        </div>
        <div class="form-field">
          <label for="course-currency">Currency</label>
          <select id="course-currency" formControlName="currency">
            <option value="">Select</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
          </select>
        </div>
        <div class="form-field">
          <label for="course-category">Category</label>
          <select id="course-category" formControlName="category">
            <option value="">Select</option>
            <option value="WEB_DEVELOPMENT">Web Development</option>
            <option value="MACHINE_LEARNING">Machine Learning</option>
            <option value="DATABASES">Databases</option>
            <option value="PROGRAMMING">Programming</option>
            <option value="CLOUD_COMPUTING">Cloud Computing</option>
            <option value="SOFTWARE_ENGINEERING">Software Engineering</option>
            <option value="DEVOPS">DevOps</option>
            <option value="MOBILE_DEVELOPMENT">Mobile Development</option>
            <option value="DATA_SCIENCE">Data Science</option>
            <option value="CYBER_SECURITY">Cyber Security</option>
          </select>
        </div>
        <div class="form-field">
          <label for="course-thumbnail">Thumbnail</label>
          <input type="file" id="course-thumbnail" accept="image/*" (change)="onThumbnailSelected($event)">
          <input type="text" formControlName="thumbnailName" placeholder="File Name">
        </div>


        <div class="form-field form-field--span-2">
          <label>Tags</label>
          <div class="tag-input">
             <span class="tag" *ngFor="let tag of courseForm.get('tags')?.value" (click)="removeTag(tag)">{{tag}} ×</span>
            <input type="text" id="course-tags" placeholder="Add tags" (keydown)="addTag($event)">
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="side-container">
    <section class="card">
      <h2 class="card__title">Pricing</h2>
      <div class="form-grid form-grid--single-col">
        <div class="form-field">
          <label for="price-onetime">One-time Price ({{courseForm.get('currency')?.value || '...'}})</label>
          <input type="number" id="price-onetime" formControlName="oneTimePrice" placeholder="e.g., 99.99">
          <div *ngIf="courseForm.get('oneTimePrice')?.invalid && courseForm.get('oneTimePrice')?.touched" class="error-message">
            <span *ngIf="courseForm.get('oneTimePrice')?.errors?.['min']">Price must be 0 or more.</span>
          </div>
        </div>
        <div class="form-field form-field--toggle">
          <label for="allows-subscription">Allows Subscription</label>
          <label class="toggle-switch" for="allows-subscription">
            <input type="checkbox" id="allows-subscription" formControlName="allowsSubscription">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="form-field">
          <label for="price-monthly">Monthly Subscription Price</label>
          <input type="number" id="price-monthly" formControlName="subscriptionPriceMonthly" placeholder="e.g., 9.99">
          <div *ngIf="courseForm.get('subscriptionPriceMonthly')?.invalid && courseForm.get('subscriptionPriceMonthly')?.touched" class="error-message">
            <span *ngIf="courseForm.get('subscriptionPriceMonthly')?.errors?.['min']">Price must be 0 or more.</span>
          </div>
        </div>
        <div class="form-field">
          <label for="price-3months">3-Month Subscription Price</label>
          <input type="number" id="price-3months" formControlName="subscriptionPrice3Months" placeholder="e.g., 24.99">
          <div *ngIf="courseForm.get('subscriptionPrice3Months')?.invalid && courseForm.get('subscriptionPrice3Months')?.touched" class="error-message">
            <span *ngIf="courseForm.get('subscriptionPrice3Months')?.errors?.['min']">Price must be 0 or more.</span>
          </div>
        </div>
        <div class="form-field">
          <label for="price-6months">6-Month Subscription Price</label>
          <input type="number" id="price-6months" formControlName="subscriptionPrice6Months" placeholder="e.g., 49.99">
          <div *ngIf="courseForm.get('subscriptionPrice6Months')?.invalid && courseForm.get('subscriptionPrice6Months')?.touched" class="error-message">
            <span *ngIf="courseForm.get('subscriptionPrice6Months')?.errors?.['min']">Price must be 0 or more.</span>
          </div>
        </div>
        <div class="form-field">
          <label>Status</label>
          <div class="status-toggle">
            <input type="radio" id="status-inactive" value="Inactive" formControlName="isActive">
            <label for="status-inactive" class="btn tag">Inactive</label>

            <input type="radio" id="status-active" value="Active" formControlName="isActive">
            <label for="status-active" class="btn tag">Active</label>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2 class="card__title">Preview</h2>
      <div class="preview-card">
        <h3><img src="assets/images/vector-168.svg" alt="">Course card preview</h3>
        <div class="preview-content">
          <div class="form-field">
            <label for="preview-thumb">Thumbnail</label>
            <div *ngIf="isThumbnailFile(); else textThumb">
              <img [src]="getThumbnailUrl()" alt="Thumbnail preview" style="max-width: 100px; max-height: 100px;">
            </div>
            <ng-template #textThumb>
              <input type="text" id="preview-thumb" readonly [value]="courseForm.get('thumbnail')?.value">
            </ng-template>
          </div>
          <div class="form-field">
            <label for="preview-video-url">Video</label>
            <input type="text" id="preview-video-url" readonly [value]="courseForm.get('previewVideoUrl')?.value">
          </div>
          <div class="form-field">
            <label for="preview-currency">Currency</label>
            <input type="text" id="preview-currency" readonly [value]="courseForm.get('currency')?.value">
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
