<section class="module-list-card">
    <header class="module-list-header">
        <div class="module-list-header__title-group">
            <h3>Modules</h3>
            <span class="tag tag--cyan">{{ modules.length }} total</span>
        </div>
        <button class="btn btn--primary-light btn--small" (click)="addModule.emit()">Add module</button>
    </header>

    <ul class="module-list" cdkDropList (cdkDropListDropped)="drop($event)">
        <li
            class="module-item"
            *ngFor="let module of modules"
            cdkDrag
            [class.active]="module.id === selectedModule?.id">

            <span class="module-item__number">{{ module.order }}</span>
            <button class="module-item__handle" cdkDragHandle aria-label="Reorder module">â˜°</button>

            <div class="module-item__details">
                <p class="module-item__title">{{ module.title }}</p>
                <p class="module-item__meta">{{ getModuleMeta(module) }}</p>
            </div>

            <div class="module-item__actions">
                <span
                    class="tag"
                    [class.tag--green]="module.status === 'Active'"
                    [class.tag--gray]="module.status === 'Inactive'">
                    {{ module.status }}
                </span>
                <span
                    class="tag tag--small"
                    [class.tag--blue]="module.state === 'new'"
                    [class.tag--yellow]="module.state === 'edited'"
                    [class.tag--green]="module.state === 'saved'"
                    *ngIf="module.state">
                    {{ module.state }}
                </span>
                <button class="btn btn--secondary-light btn--small" (click)="moduleSelected.emit(module)">Open</button>
            </div>

        </li>
    </ul>
</section>
